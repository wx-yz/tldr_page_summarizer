<!DOCTYPE html>
<html>
<head>
  <title>TL;DR Page Summarizer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>TL;DR Summarizer</h1>
    
    <div class="api-key-section">
      <label for="apiKey">OpenAI API Key:</label>
      <div class="input-with-icon">
        <input type="password" id="apiKey" placeholder="Enter your OpenAI API key">
        <span id="toggleApiKeyVisibility" class="toggle-visibility-icon" title="Show API Key">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" id="eyeIcon">
            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
          </svg>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" id="eyeSlashIcon" class="hidden">
            <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/>
            <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/>
          </svg>
        </span>
      </div>
      <button id="saveApiKey">
        <span class="button-text">Save API Key</span>
        <span class="loading-spinner hidden"></span>
      </button>
      <div id="apiKeyStatus" class="status-message"></div>
    </div>

    <div class="summary-options">
      <h2>Select Summary Type:</h2>
      <select id="summaryType">
        <option value="short">Short Summary</option>
        <option value="explain">Explain like to a smart 12 year old</option>
        <option value="important">Most Important Points</option>
      </select>
    </div>

    <div class="character-limit-warning hidden">
      <p>The page content is very long. This might take a while to process.</p>
    </div>

    <button id="generateSummary" class="primary-button">
      <span class="button-text">Generate Summary</span>
      <span class="loading-spinner hidden"></span>
    </button>

    <div id="summaryResult" class="summary-result">
      <div class="summary-header">
        <h3>Summary:</h3>
        <button id="copySummary" class="icon-button" title="Copy to clipboard">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 4V14H14V4H4ZM3 3H15V15H3V3Z" fill="currentColor"/>
            <path d="M2 1V11H3V2H12V1H2Z" fill="currentColor"/>
          </svg>
        </button>
      </div>
      <div id="summaryContent"></div>
    </div>

    <div id="loading" class="loading hidden">
      <div class="spinner"></div>
      <p>Generating summary...</p>
    </div>

    <div id="thinking" class="thinking-container hidden">
      <div class="thinking-dots">
        <div class="thinking-dot"></div>
        <div class="thinking-dot"></div>
        <div class="thinking-dot"></div>
      </div>
      <p class="thinking-text">Processing with AI...</p>
    </div>

    <div id="error" class="error-message hidden"></div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
